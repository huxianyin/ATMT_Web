(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},32:function(e,t,a){e.exports=a(56)},41:function(e,t,a){},43:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(24),l=a.n(r),i=a(4),c=a(5),m=a(7),u=a(3),o=a(8),p=(a(41),a(15)),h=(a(43),function(e){return s.a.createElement("div",{className:"Setting"},s.a.createElement("header",null,s.a.createElement("button",{className:"reset-btn",onClick:function(){e.Reset()}},"Reset"),s.a.createElement("h1",{className:"h1-text"},"ATMT"),s.a.createElement("h2",{className:"h1-text"},"~Advanced Trail Making Test~")),s.a.createElement("div",{className:"input-panel"},s.a.createElement("div",{className:"sub-container"},s.a.createElement("div",{className:"param-label"},"Experiment Name"),s.a.createElement("div",{className:"param-label"},"Num (1-20)"),s.a.createElement("div",{className:"param-label"},"Step (1-20)"),s.a.createElement("div",{className:"param-label"},"Task-R")),s.a.createElement("div",{className:"sub-container"},s.a.createElement("div",{className:"param-input"},s.a.createElement("input",{className:"input-area",type:"text",pattern:"[0-9]*-[0-9]*",defaultValue:e.exp_name,onChange:function(t){e.handleParamChange("exp_name",t.target.value)}})),s.a.createElement("div",{className:"param-input"},s.a.createElement("input",{className:"input-area",type:"number",pattern:"[0-9]*",step:"1",min:1,max:20,defaultValue:e.num,onChange:function(t){var a=t.target.value>20?20:t.target.value;a=a<1?1:a,e.handleParamChange("num",a)}})),s.a.createElement("div",{className:"param-input"},s.a.createElement("input",{className:"input-area",type:"number",pattern:"[0-9]*",step:"1",min:1,max:20,defaultValue:e.step,onChange:function(t){var a=t.target.value>20?20:t.target.value;a=a<1?1:a,e.handleParamChange("step",a)}})),s.a.createElement("div",{className:"param-input"},s.a.createElement("label",{className:"myCheckbox"},s.a.createElement("input",{type:"checkbox",defaultChecked:e.task_r,onChange:function(t){e.handleParamChange("task_r",t.target.checked)}}),s.a.createElement("span",{className:"checkmark"}))))),s.a.createElement("button",{className:"my-btn"},s.a.createElement(p.b,{to:e.nextPhase},"Next")))}),d=(a(21),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={started:e.started,completeNum:0,step:0,num:0,progress:0},a}return Object(o.a)(t,e),Object(c.a)(t,[{key:"setStep",value:function(e){this.state.step=e,this.setState({step:e})}},{key:"setNum",value:function(e){this.state.num=e,this.setState({num:e})}},{key:"onStart",value:function(){this.state.started=!0,this.setState({started:!0})}},{key:"setCompleteNumber",value:function(e){this.state.completeNum=e;var t=0;t=0===this.state.num?0:this.state.completeNum/(this.state.num+this.state.step),this.state.progress=t,this.setState({completeNum:e,progress:t})}},{key:"componentDidMount",value:function(){this.state.completeNum=0,this.state.step=0,this.state.num=0,this.state.progress=0}},{key:"render",value:function(){var e=this,t={backgroundColor:"#0BD318",width:100*this.state.progress+"%",transition:"width ".concat(200,"ms"),height:5},a={position:"fixed",textAlign:"center",left:"44%"};return s.a.createElement("div",{className:"completeBar",style:t},function(){if(e.state.started)return s.a.createElement("p",{style:a},"\u5b8c\u6210\uff1a"+parseInt(100*e.state.progress)+"%")}())}}]),t}(n.Component)),b=["\u3042","\u3044","\u3046","\u3048","\u304a","\u304b","\u304d","\u304f","\u3051","\u3053","\u3055","\u3057","\u3059","\u305b","\u305d","\u305f","\u3061","\u3064","\u3066","\u3068","\u306a","\u306b","\u306c","\u306d","\u306e","\u306f","\u3072","\u3075","\u3078","\u307b","\u307e","\u307f","\u3080","\u3081","\u3082","\u3084","\u3086","\u3088","\u3089","\u308a","\u308b","\u308c","\u308d","\u308f","\u3092","\u3093"],f=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={started:!1,finished:!1,completeBar:null,alphabet_array:[],table:[],posNumber:[],posBlanck:[],nextAnswer:0,lastTime:0,setting:{step:e.phase.includes("trial")?e.trial_step:e.step,num:e.phase.includes("trial")?e.trial_num:e.num}},a}return Object(o.a)(t,e),Object(c.a)(t,[{key:"shuffle",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"IsNeibor",value:function(e,t,a){return!(a<=4)&&(Math.abs(e-t)<2||Math.abs(e-t)===a)}},{key:"updatePosition",value:function(e,t,a,n,s){if(s){for(var r=[],l=0;l<e*e;l++)r.push(l);for(var i=this.shuffle(r);this.IsNeibor(i[0],this.state.posNumber[0],e)&&0!=n;)i=this.shuffle(r);this.state.posNumber=i.slice(0,a),this.state.posBlanck=i.slice(a,r.length)}else a<t?(this.state.posBlanck.push(this.state.posNumber[0]),this.state.posNumber.shift()):(this.state.posBlanck.push(this.state.posNumber[0]),this.state.posNumber.shift(),this.state.posNumber.push(this.state.posBlanck[0]),this.state.posBlanck.shift())}},{key:"generateMarksA",value:function(e,t){for(var a=[],n=0,r=0;r<e;r++){for(var l=[],i=0;i<e;i++)this.state.posNumber.includes(n)?l.push(s.a.createElement("th",{key:n},s.a.createElement("button",{id:this.state.posNumber.indexOf(n)+t,onClick:this.handleMarkClick.bind(this),className:"mark"},this.state.posNumber.indexOf(n)+1+t))):l.push(s.a.createElement("th",{key:n},s.a.createElement("button",{className:"transparent"}))),n++;a.push(s.a.createElement("tr",{key:r},l))}return a}},{key:"generateMarksB",value:function(e,t){for(var a=[],n=0,r=!0,l=0;l<e;l++){for(var i=[],c=0;c<e;c++){if(this.state.posNumber.includes(n)){var m=this.state.posNumber.indexOf(n)+t;r=m%2===0;var u=Math.floor(m/2)+1,o=this.state.alphabet_array[Math.floor(m/2)%this.state.alphabet_array.length],p=r?u:o;i.push(s.a.createElement("th",{key:n},s.a.createElement("button",{id:m,onClick:this.handleMarkClick.bind(this),className:"mark"},p)))}else i.push(s.a.createElement("th",{key:n},s.a.createElement("button",{className:"transparent"})));n++}a.push(s.a.createElement("tr",{key:l},i))}return a}},{key:"ceilSqrt",value:function(e){return Math.ceil(Math.sqrt(e))}},{key:"generateMarks",value:function(e,t,a){var n=e.includes("A")?this.state.setting.num:2*this.state.setting.num,s=e.includes("A")?this.state.setting.step:2*this.state.setting.step,r=e.includes("A")?this.generateMarksA.bind(this):this.generateMarksB.bind(this),l=this.state.nextAnswer<s,i=t-s,c=this.ceilSqrt(n)+1,m=l?n:n-i;if(m>0)return this.updatePosition(c,n,m,t,a),r(c,t);this.state.finished=!0,this.setState({finished:!0})}},{key:"handleMarkClick",value:function(e){var t=e.target.id;if(t==this.state.nextAnswer){this.state.nextAnswer=this.state.nextAnswer+1;var a=new Date,n=a.getTime()/1e3,s=n-this.state.lastTime;a=null,this.props.onUpdateResult({item_id:t,timestamp:n,reaction_time:s,phase:this.props.phase}),this.state.lastTime=n,this.state.completeBar.setCompleteNumber(this.state.nextAnswer);var r=this.generateMarks(this.props.phase,this.state.nextAnswer,this.props.task_r);this.setState({table:r})}else e.target.setAttribute("Class","mark_wrong"),setTimeout(function(e){e.setAttribute("Class","mark")}.bind(this,e.target),500)}},{key:"componentDidMount",value:function(){this.state.nextAnswer=0,this.state.lastTime=0,this.state.started=!1,"jp"===this.props.lang?this.state.alphabet_array=b:"en"===this.props.lang&&(this.state.alphabet_array=f),this.state.completeBar.setCompleteNumber(this.state.nextAnswer);var e=this.props.phase.includes("A")?this.state.setting.num:2*this.state.setting.num,t=this.props.phase.includes("A")?this.state.setting.step:2*this.state.setting.step;this.state.completeBar.setNum(e),this.state.completeBar.setStep(t),this.setState({table:this.generateMarks(this.props.phase,this.state.nextAnswer,!0)})}},{key:"render",value:function(){var e=this,t=s.a.createElement("table",{className:"posMesh"},s.a.createElement("tbody",null,this.state.table)),a=s.a.createElement("button",{className:"startPannel",onClick:function(){e.state.started=!0,e.setState({started:!0}),e.state.completeBar.onStart();var t=new Date;e.state.lastTime=t.getTime()/1e3,t=null}},s.a.createElement("span",null,"\u6e96\u5099\u306f\u3044\u3044\u3067\u3059\u304b\uff1f")),n=s.a.createElement("button",{className:"nextPanel"},s.a.createElement(p.b,{to:this.props.nextPhase},"NEXT"));return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"window"},e.state.started?e.state.finished?s.a.createElement("p",{className:"finish-message"},"\u7d42\u308f\u308a\u307e\u3057\u305f!"):t:a),e.state.finished?n:s.a.createElement(d,{className:"completeBar",started:e.state.started,ref:function(t){e.state.completeBar=t}}))}}]),t}(n.Component),E={trialA:s.a.createElement("p",null,"\u4eca\u304b\u3089\uff0c\u691c\u67fbA\u306e\u305f\u3081\u306e\u7df4\u7fd2\u3092\u3057\u307e\u3059\u3002\u753b\u9762\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u6570\u5b57\u306e",s.a.createElement("span",null,"\u300e1\uff0d2\uff0d3\u300f"),"\u3068\u3044\u3046\u3088\u3046\u306a\u9806\u756a\u306b\u3067\u304d\u308b\u3060\u3051\u65e9\u304f\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u7df4\u7fd2\u306e\u6210\u7e3e\u306f\u6700\u5f8c\u306e\u6210\u7e3e\u306b\u8a18\u5165\u3057\u307e\u305b\u3093\u3002\u7df4\u7fd2\u306f\u7d42\u308f\u3063\u305f\u3089\u3001\u672c\u756a\u306e\u8ab2\u984c\u306b\u9032\u3081\u307e\u3059\u3002"),partA:s.a.createElement("p",null,"\u30b9\u30bf\u30fc\u30c8\u3057\u305f\u3089\uff0c",s.a.createElement("span",null,"\u691c\u67fbA\u672c\u756a"),"\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\u753b\u9762\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u6570\u5b57\u306e",s.a.createElement("span",null,"\u300e1\uff0d2\uff0d3\u300f"),"\u3068\u3044\u3046\u3088\u3046\u306a\u9806\u756a\u306b\u3067\u304d\u308b\u3060\u3051\u65e9\u304f\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u6210\u7e3e\u306f\u6700\u5f8c\u306e\u6210\u7e3e\u306b\u8a18\u5165\u3057\u307e\u3059\u3002"),trialB:s.a.createElement("p",null,"\u691c\u67fbB\u306f\u5c11\u3057\u9055\u3046\u3053\u3068\u3092\u3057\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\u6700\u521d\u306f\u7df4\u7fd2\u3067\u3059\u3002\u4eca\u5ea6\u306f",s.a.createElement("span",null,"\u300e1\uff0d\u3042\uff0d2\uff0d\u3044\uff0d3\uff0d\u3046\u300f"),"\u3068\u3044\u3046\u3088\u3046\u306a\u6570\u5b57\u3068\u4eee\u540d\u3092\u4ea4\u4e92\u3057\u305f\u9806\u756a\u3067\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u3057\u9014\u4e2d\u3067\u6570\u5b57\u3068\u4eee\u540d\u304c\u4ea4\u4e92\u3067\u306a\u304b\u3063\u305f\u308a\uff0c\u9806\u756a\u3092\u9593\u9055\u3063\u305f\u308a\u3059\u308b\u3068\u4e0d\u6b63\u89e3\u3068\u5224\u5b9a\u3055\u308c\u307e\u3059\u3002\u3067\u304d\u308b\u3060\u3051\u65e9\u304f\u884c\u306a\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u7df4\u7fd2\u306e\u6210\u7e3e\u306f\u6700\u5f8c\u306e\u6210\u7e3e\u306b\u8a18\u5165\u3057\u307e\u305b\u3093\u3002\u7df4\u7fd2\u306f\u7d42\u308f\u3063\u305f\u3089\u3001\u672c\u756a\u306e\u8ab2\u984c\u306b\u9032\u3081\u307e\u3059\u3002"),partB:s.a.createElement("p",null,"\u30b9\u30bf\u30fc\u30c8\u3057\u305f\u3089\uff0c",s.a.createElement("span",null,"\u691c\u67fbB\u672c\u756a"),"\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\u753b\u9762\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u6570\u5b57\u3068\u4eee\u540d\u3092\u3001",s.a.createElement("span",null,"\u300e1\uff0d\u3042\uff0d2\uff0d\u3044\uff0d3\uff0d\u3046\u300f"),"\u3068\u3044\u3046\u3088\u3046\u306a\u6570\u5b57\u3068\u4eee\u540d\u3092\u4ea4\u4e92\u3057\u305f\u9806\u756a\u3067\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u6210\u7e3e\u306f\u6700\u5f8c\u306e\u6210\u7e3e\u306b\u8a18\u5165\u3057\u307e\u3059\u3002")};function v(e,t){return(e?"trial":"part")+t}var k=function(e){var t,a,n=function(e,t){var a=v(e,t);return E[a]}(e.isTrial,e.taskType),r=v(e.isTrial,e.taskType),l=(t=e.isTrial,a=e.taskType,"\u301c "+(t?"trial":"part").toUpperCase()+" "+a+" \u301c");return s.a.createElement("div",{className:"container"},s.a.createElement("button",{className:"reset-btn",onClick:function(){e.Reset()}},"Reset"),s.a.createElement("h3",null,l," "),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"box26"},s.a.createElement("span",{className:"box-title"},"\u30eb\u30fc\u30eb"),n)),s.a.createElement(g,{exp_name:e.exp_name,num:e.num,step:e.step,trial_num:e.trial_num,trial_step:e.trial_step,lang:e.lang,task_r:e.task_r,phase:r,onClearHistory:e.onClearHistory,onUpdateResult:e.onUpdateResult,nextPhase:e.nextPhase}))},N=a(27);a(46);var y=function(e){var t=e.data.filter(function(t){return t[e.condition_label]===e.condition}),a=e.x,n=e.y,r={labels:t.map(function(e){return e[a]}),datasets:[{data:t.map(function(e){return e[n]}),label:e.label,borderColor:e.color,borderWidth:2}]};return s.a.createElement(N.a,{data:r,options:{responsive:!0,maintainAspectRatio:!1}})},x=(a(47),a(25)),_=a.n(x);var A=function(e){var t,a=e.setting.exp_name+".csv",n=e.data.length>0?e.data:[],r=JSON.stringify(e.setting)+"\n";return r+=e.data.length>0?(t=n,Object.keys(t[0]).join(",")+"\n"+t.map(function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}).join("\n")):"",s.a.createElement("div",{className:"Report"},s.a.createElement("div",{className:"chart-container"},s.a.createElement("div",{className:"my-chart"},s.a.createElement(y,{data:n,x:"item_id",y:"reaction_time",condition_label:"phase",condition:"partA",label:"Part A",color:"rgb(75, 192, 192)"})),s.a.createElement("div",{className:"my-chart"},s.a.createElement(y,{data:n,x:"item_id",y:"reaction_time",condition_label:"phase",condition:"partB",label:"Part B",color:"rgb(75, 100, 192)"}))),s.a.createElement("div",{className:"button-container"},s.a.createElement("button",{style:{width:500,"marginLeft:":100},className:"dl-btn",onClick:function(){return function(e,t){var a=document.createElement("a"),n=new Blob([t],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e,document.body.appendChild(a),a.click()}(a,r)}},s.a.createElement("a",null,"Download Results "),s.a.createElement(_.a,{className:"icon"})),s.a.createElement("button",{style:{width:500,marginLeft:100},className:"my-btn"}," ",s.a.createElement(p.b,{to:e.nextPhase},"Try Again"))))},C=a(0),w={num:1,step:1,task_r:!1,exp_name:"hu"},B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={phase:"setting",setting:{num:w.num,step:w.step,task_r:w.task_r,exp_name:w.exp_name},results:Array()},a}return Object(o.a)(t,e),Object(c.a)(t,[{key:"reset",value:function(){window.confirm("\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u3068\u3001\u4eca\u307e\u3067\u306e\u6210\u7e3e\u306f\u7121\u304f\u306a\u308a\u307e\u3059\u3002\u672c\u5f53\u306b\u30ea\u30bb\u30c3\u30c8\u3057\u307e\u3059\u304b\uff1f")&&window.location.reload()}},{key:"handleParameterChange",value:function(e,t){var a=this.state.setting;a[e]="task_r"===e||"exp_name"===e?t:parseFloat(t)}},{key:"onUpdateResult",value:function(e){this.state.results.push(e)}},{key:"generage_page",value:function(e,t,a){return s.a.createElement(k,{isTrial:e,taskType:t,nextPhase:a,Reset:this.reset,exp_name:this.state.setting.exp_name,num:this.state.setting.num,step:this.state.setting.step,trial_num:1,trial_step:1,lang:"en",task_r:this.state.setting.task_r,onUpdateResult:this.onUpdateResult.bind(this)})}},{key:"render",value:function(){var e=this,t=function(t){return s.a.createElement(h,{num:e.state.setting.num,step:e.state.setting.step,task_r:e.state.setting.task_r,exp_name:e.state.setting.exp_name,nextPhase:"/trialA",handleParamChange:e.handleParameterChange.bind(e),Reset:e.reset})},a=function(t){return e.generage_page(!0,"A","/partA")},n=function(t){return e.generage_page(!1,"A","/trialB")},r=function(t){return e.generage_page(!0,"B","/partB")},l=function(t){return e.generage_page(!1,"B","/report")},i=function(t){return s.a.createElement(A,{data:e.state.results,setting:e.state.setting,save_dir:"../results/",nextPhase:"/"})};return s.a.createElement("div",null,s.a.createElement(p.a,{basename:"/"},s.a.createElement(C.c,null,s.a.createElement(C.a,{exact:!0,path:"/",element:s.a.createElement(t,null)}),"  ",s.a.createElement(C.a,{path:"/trialA",element:s.a.createElement(a,null)}),"  ",s.a.createElement(C.a,{path:"/partA",element:s.a.createElement(n,null)}),"  ",s.a.createElement(C.a,{path:"/trialB",element:s.a.createElement(r,null)}),"  ",s.a.createElement(C.a,{path:"/partB",element:s.a.createElement(l,null)}),"  ",s.a.createElement(C.a,{path:"/report",element:s.a.createElement(i,null)}),"  ")," ")," ")}}]),t}(n.Component);l.a.createRoot(document.getElementById("root")).render(s.a.createElement(B,null))}},[[32,2,1]]]);
//# sourceMappingURL=main.df9918f3.chunk.js.map